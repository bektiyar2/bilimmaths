<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BilimMath ‚Äî –¢—Ä–µ–Ω–∞–∂–µ—Ä</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- –ì–ï–ù–ï–†–ê–¢–û–†–´ –ó–ê–î–ê–ß ---
        const randomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

        const generators = {
            1: () => {
                const n1 = randomInt(1, 10), n2 = randomInt(1, 10);
                return { q: `${n1} + ${n2} = ?`, ans: n1 + n2, topic: '–ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞' };
            },
            2: () => {
                const a = randomInt(2, 5), b = randomInt(1, 10);
                return { q: `${a} √ó ${b} = ?`, ans: a * b, topic: '–£–º–Ω–æ–∂–µ–Ω–∏–µ' };
            },
            3: () => {
                const a = randomInt(2, 9), ans = randomInt(1, 10), res = a * ans;
                return { q: `${res} : ${a} = ?`, ans, topic: '–î–µ–ª–µ–Ω–∏–µ' };
            },
            4: () => {
                const n1 = randomInt(100, 500), n2 = randomInt(100, 400);
                return { q: `${n1} + ${n2} = ?`, ans: n1 + n2, topic: '–°–ª–æ–∂–µ–Ω–∏–µ' };
            },
            5: () => {
                const x = randomInt(1, 10), y = randomInt(1, 10);
                return { q: `x + ${x} = ${x + y}. –ù–∞–π—Ç–∏ x`, ans: y, topic: '–£—Ä–∞–≤–Ω–µ–Ω–∏—è' };
            },
            6: () => {
                const a = randomInt(-10, 10), b = randomInt(-10, 10);
                return { q: `(${a}) + (${b}) = ?`, ans: a + b, topic: '–¶–µ–ª—ã–µ —á–∏—Å–ª–∞' };
            },
            7: () => {
                const x = randomInt(1, 10), a = randomInt(2, 4);
                const res = a * x + 5;
                return { q: `${a}x + 5 = ${res}. x = ?`, ans: x, topic: '–ê–ª–≥–µ–±—Ä–∞' };
            },
            8: () => {
                const x = randomInt(1, 5);
                return { q: `f(x) = x¬≤ + 2. –ù–∞–π—Ç–∏ f(${x})`, ans: x*x + 2, topic: '–§—É–Ω–∫—Ü–∏–∏' };
            },
            9: () => {
                const x = randomInt(1, 6);
                return { q: `‚àöx = ${x}. –ù–∞–π—Ç–∏ x`, ans: x*x, topic: '–ö–æ—Ä–Ω–∏' };
            }
        };

        const BilimMath = () => {
            const [grade, setGrade] = useState(1);
            const [lang, setLang] = useState('ru');
            const [problem, setProblem] = useState(generators[1]());
            const [userAnswer, setUserAnswer] = useState('');
            const [feedback, setFeedback] = useState(null);
            const [stats, setStats] = useState({ correct: 0, total: 0 });

            const checkAnswer = () => {
                if (!userAnswer) return;
                const isCorrect = parseFloat(userAnswer) === parseFloat(problem.ans);
                setFeedback(isCorrect);
                setStats(s => ({ correct: isCorrect ? s.correct + 1 : s.correct, total: s.total + 1 }));
                if (isCorrect) setTimeout(() => {
                    const newProb = generators[grade]();
                    setProblem(newProb);
                    setUserAnswer('');
                    setFeedback(null);
                }, 1000);
            };

            const t = {
                ru: { title: "BilimMath", check: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å", grade: "–∫–ª–∞—Å—Å", score: "–°—á—ë—Ç" },
                kk: { title: "BilimMath", check: "–¢–µ–∫—Å–µ—Ä—É", grade: "—Å—ã–Ω—ã–ø", score: "“∞–ø–∞–π" }
            }[lang];

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4">
                    <div className="w-full max-w-md bg-white rounded-[2rem] shadow-2xl p-8 border-4 border-indigo-50">
                        <div className="flex justify-between items-center mb-8">
                            <h1 className="text-2xl font-black text-indigo-600">BilimMath üá∞üáø</h1>
                            <div className="flex gap-2">
                                <button onClick={() => setLang('kk')} className="text-sm font-bold p-2">KK</button>
                                <button onClick={() => setLang('ru')} className="text-sm font-bold p-2">RU</button>
                            </div>
                        </div>

                        <div className="grid grid-cols-5 gap-1 mb-6">
                            {[1,2,3,4,5,6,7,8,9].map(g => (
                                <button key={g} onClick={() => {setGrade(g); setProblem(generators[g]()); setFeedback(null);}} 
                                    className={`py-2 rounded-lg text-sm font-bold ${grade === g ? 'bg-indigo-600 text-white' : 'bg-slate-100'}`}>{g}</button>
                            ))}
                        </div>

                        <div className="bg-slate-50 rounded-2xl p-8 text-center mb-6">
                            <p className="text-slate-400 text-xs mb-2 uppercase tracking-widest">{problem.topic}</p>
                            <div className="text-3xl font-bold text-slate-800">{problem.q}</div>
                        </div>

                        <input 
                            type="number" 
                            value={userAnswer}
                            onChange={(e) => setUserAnswer(e.target.value)}
                            onKeyDown={(e) => e.key === 'Enter' && checkAnswer()}
                            className="w-full bg-slate-100 rounded-xl p-4 text-center text-2xl font-bold mb-4 focus:ring-4 ring-indigo-100 outline-none transition"
                            placeholder="?"
                        />

                        <button onClick={checkAnswer} className="w-full bg-indigo-600 text-white py-4 rounded-xl font-bold text-xl active:scale-95 transition">
                            {t.check}
                        </button>

                        {feedback !== null && (
                            <div className={`mt-4 text-center font-bold text-lg ${feedback ? 'text-green-500' : 'text-red-500'}`}>
                                {feedback ? '‚úÖ –î“±—Ä—ã—Å!' : `‚ùå “ö–∞—Ç–µ! –ñ–∞—É–∞–ø: ${problem.ans}`}
                            </div>
                        )}

                        <div className="mt-8 pt-6 border-t border-slate-100 flex justify-between text-slate-400 font-bold">
                            <span>{t.score}: {stats.correct}/{stats.total}</span>
                            <span>{stats.total > 0 ? Math.round((stats.correct/stats.total)*100) : 0}%</span>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<BilimMath />);
    </script>
</body>
</html>
